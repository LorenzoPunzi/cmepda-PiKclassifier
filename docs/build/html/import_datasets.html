
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>import_datasets &#8212; cmepda-PiKclassifier  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="dnn_settings" href="dnn_settings.html" />
    <link rel="prev" title="gen_from_toy" href="gen_from_toy.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="import-datasets">
<h1>import_datasets<a class="headerlink" href="#import-datasets" title="Permalink to this heading">¶</a></h1>
<p>Documentation for the functions in the  <code class="docutils literal notranslate"><span class="pre">utilities.import_datasets</span></code> module:</p>
<dl class="py function">
<dt class="sig sig-object py" id="utilities.import_datasets.loadvars">
<span class="sig-prename descclassname"><span class="pre">utilities.import_datasets.</span></span><span class="sig-name descname"><span class="pre">loadvars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_pi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tree</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flatten1d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utilities.import_datasets.loadvars" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that extracts the events of the chosen variables from two
ROOT files and stores them in numpy arrays.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_pi</strong> (<em>str</em>) – Path to MC root file of background only processes.</p></li>
<li><p><strong>file_k</strong> (<em>str</em>) – Path to MC root file of signal only processes.</p></li>
<li><p><strong>tree</strong> (<em>str</em>) – Tree in which the variables are stored on the root files.</p></li>
<li><p><strong>vars</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>tuple</em><em>[</em><em>str</em><em>]</em>) – Tuple containing names of the variables to be loaded.</p></li>
<li><p><strong>flag_column</strong> (<em>bool</em>) – If set to True, a column full of 0 or 1, for background or signal events respectively, is appended as the last column of the 2D array.</p></li>
<li><p><strong>flatten1d</strong> (<em>bool</em>) – If is True and only one variable is passed as “vars”, the arrays generated are returned as row-arrays instead of one-column arrays.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Two 2D numpy arrays filled by events of the two root files given in input and containing the requested variables, plus a flag-column if requested.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>2D numpy.array[float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utilities.import_datasets.include_merged_variables">
<span class="sig-prename descclassname"><span class="pre">utilities.import_datasets.</span></span><span class="sig-name descname"><span class="pre">include_merged_variables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rootpaths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tree</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_arrays</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_variables</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utilities.import_datasets.include_merged_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that allows to append to the existing datasets (numpy arrays) new
columns filled by the outputs of the mergevar() function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rootpaths</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>tuple</em><em>[</em><em>str</em><em>]</em>) – Three element list or tuple of .root file paths. The first should indicate the root file containing the “background” species (flag=0), the second the “signal” species (flag=1), the third the mix.</p></li>
<li><p><strong>tree</strong> (<em>str</em>) – Tree in which the variables are stored on the root files.</p></li>
<li><p><strong>initial_arrays</strong> (<em>list</em><em>[</em><em>2D numpy.array</em><em>[</em><em>double</em><em>]</em><em>] or </em><em>tuple</em><em>[</em><em>2D numpy.array</em><em>[</em><em>double</em><em>]</em><em>]</em>) – Three element list or tuple of 2D numpy arrays containing the data of the origina variables of background, signal and mixed events.</p></li>
<li><p><strong>new_variables</strong> (<em>list</em><em>[</em><em>tuple</em><em>[</em><em>str</em><em>]</em><em>] or </em><em>tuple</em><em>[</em><em>tuple</em><em>[</em><em>str</em><em>]</em><em>]</em>) – List or tuple containing two element lists or tuples of variables to merge.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list or tuple containing the new numpy arrays for the three datasets, with the new columns filled with the data retrieved by the merge-variables algorithm. For MC datasets the flag column is still the rightmost column.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[2D numpy.array[double]] or tuple[2D numpy.array[double]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utilities.import_datasets.array_generator">
<span class="sig-prename descclassname"><span class="pre">utilities.import_datasets.</span></span><span class="sig-name descname"><span class="pre">array_generator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rootpaths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tree</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_mc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">for_training</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">for_testing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utilities.import_datasets.array_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates arrays for ML treatment (training and testing). To guarantee
unbiasedness the training array has an equal number of background and signal
events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rootpaths</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>tuple</em><em>[</em><em>str</em><em>]</em>) – Three element list or tuple of .root file paths. The first should indicate the root file containing the “background” species (flag=0), the second the “signal” species (flag=1), the third the mix.</p></li>
<li><p><strong>tree</strong> (<em>str</em>) – Tree in which the variables are stored on the root files.</p></li>
<li><p><strong>vars</strong> (<em>list</em><em>[</em><em>str</em><em>] or </em><em>tuple</em><em>[</em><em>str</em><em>]</em>) – Tuple containing names of the variables to be used.</p></li>
<li><p><strong>n_mc</strong> (<em>int</em>) – Number of events to take from the root files for the training set.</p></li>
<li><p><strong>n_data</strong> (<em>int</em>) – Number of events to take from the root file for the testing set.</p></li>
<li><p><strong>for_training</strong> (<em>bool</em>) – If True generates scambled dataset for training from the mc sets with flags.</p></li>
<li><p><strong>for_testing</strong> (<em>bool</em>) – If True generates dataset to be evaluated, hence without flag column.</p></li>
<li><p><strong>new_variables</strong> (<em>list</em><em>[</em><em>tuple</em><em>[</em><em>str</em><em>]</em><em>] or </em><em>tuple</em><em>[</em><em>tuple</em><em>[</em><em>str</em><em>]</em><em>]</em>) – Optional list or tuple containing two element lists or tuples of variables to merge.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Two element tuple containing 2D numpy arrays. The first contains the MC datasets’ events (scrambled to avoid position bias) and the flag that identifies each event as background or signal. The second contains the events of the mixed dataset without flags (one less column).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[2D numpy.array[double]] or tuple[2D numpy.array[double]]</p>
</dd>
</dl>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">cmepda-PiKclassifier</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="utils.html">utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="var_cut.html">var_cut</a></li>
<li class="toctree-l1"><a class="reference internal" href="cornerplot.html">cornerplot</a></li>
<li class="toctree-l1"><a class="reference internal" href="gen_from_toy.html">gen_from_toy</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">import_datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#utilities.import_datasets.loadvars"><code class="docutils literal notranslate"><span class="pre">loadvars()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#utilities.import_datasets.include_merged_variables"><code class="docutils literal notranslate"><span class="pre">include_merged_variables()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#utilities.import_datasets.array_generator"><code class="docutils literal notranslate"><span class="pre">array_generator()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dnn_settings.html">dnn_settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="merge_variables.html">merge_variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="test_import_datasets.html">test_import_datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="deepnn.html">deepnn</a></li>
<li class="toctree-l1"><a class="reference internal" href="dtc.html">dtc</a></li>
<li class="toctree-l1"><a class="reference internal" href="template_fit.html">template_fit</a></li>
<li class="toctree-l1"><a class="reference internal" href="template_functions.html">template_functions</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="gen_from_toy.html" title="previous chapter">gen_from_toy</a></li>
      <li>Next: <a href="dnn_settings.html" title="next chapter">dnn_settings</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Ruben Forti and Lorenzo Punzi.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/import_datasets.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>